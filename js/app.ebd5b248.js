(function(){"use strict";var t={2574:function(t,s,e){var o=e(6848),a=function(){var t=this,s=t._self._c;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"jumbotron"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[t._m(0),s("div",{staticClass:"col-md-6"},[s("form",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTxt,expression:"searchTxt"}],staticClass:"search_form",attrs:{type:"text",placeholder:"Search Courses"},domProps:{value:t.searchTxt},on:{keyup:t.searchLessons,input:function(s){s.target.composing||(t.searchTxt=s.target.value)}}})])]),s("div",{staticClass:"col"},[s("button",{staticClass:"cart-button btn",attrs:{disabled:t.cartItems.length<=0},on:{click:t.updateShowProduct}},[s("i",{staticClass:"fa fa-shopping-cart"}),t._v(" Cart "+t._s(t.cartCount())+" ")])])])])]),t._m(1),t.showProduct?s("section",{attrs:{id:"product"}},[s("Lessons",{attrs:{lessons:t.lessons},on:{addLesson:t.addLessonToCart}})],1):s("section",{attrs:{id:"check-out"}},[s("Checkout",{attrs:{cartItems:t.cartItems},on:{removeLesson:t.removeLessonFromCart,checkOut:t.checkOut}})],1)])},c=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"col"},[s("h2",{staticClass:"logo"},[t._v("Lesson")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"container-fluid nav_view p-4"},[s("h3",{staticClass:"text-center"},[t._v(" Home | Store ")])])}],i=(e(4114),function(){var t=this,s=t._self._c;return s("div",[s("h2",{staticClass:"text-center mt-5 mb-5"}),s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-2"},[s("aside",[s("h6",[t._v("Sort By")]),s("div",{staticClass:"custom-control custom-radio"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.attribute,expression:"attribute"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"subject",value:"subject",name:""},domProps:{checked:t._q(t.attribute,"subject")},on:{change:function(s){t.attribute="subject"}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"subject"}},[t._v("Subject")])]),s("div",{staticClass:"custom-control custom-radio"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.attribute,expression:"attribute"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"location",value:"location",name:""},domProps:{checked:t._q(t.attribute,"location")},on:{change:function(s){t.attribute="location"}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"location"}},[t._v("Location")])]),s("div",{staticClass:"custom-control custom-radio mb-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.attribute,expression:"attribute"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"price",value:"price",name:""},domProps:{checked:t._q(t.attribute,"price")},on:{change:function(s){t.attribute="price"}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"price"}},[t._v("Price")])]),s("div",{staticClass:"custom-control custom-radio mb-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.attribute,expression:"attribute"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"availability",value:"availability",name:""},domProps:{checked:t._q(t.attribute,"availability")},on:{change:function(s){t.attribute="availability"}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"availability"}},[t._v("Availability")])]),s("h6",{staticClass:"mt-4"},[t._v("Order By")]),t._m(0),t._m(1)])]),s("div",{staticClass:"col-md-10 row"},[t.lessons.length>0?s("div",{staticClass:"row grid-1"},t._l(t.sortedLessons,(function(e){return s("div",{key:e.id,staticClass:"col-md-4"},[s("div",{staticClass:"card mb-4"},[s("img",{staticClass:"card-img",attrs:{src:`https://cw2-backend.onrender.com/${e.image}`,alt:"Lesson Image"}}),s("div",{staticClass:"card-body"},[s("h6",[t._v("Subject: "+t._s(e.subject))]),s("h6",[t._v("Location: "+t._s(e.location))]),s("h6",[t._v("Available: "+t._s(e.availablespace))]),s("h6",[t._v("Price: £"+t._s(e.price))]),s("h6",[t._v("Rating: "),t._l(e.rating,(function(e){return s("span",{key:e.id},[t._v("★")])})),t._l(5-e.rating,(function(e){return s("span",{key:e.id},[t._v("☆")])}))],2),s("button",{staticClass:"add_to_card-btn btn",attrs:{disabled:e.availablespace<=0},on:{click:function(s){return t.addLesson(e._id,e)}}},[t._v("Add to Cart")])])])])})),0):s("div",{staticClass:"row grid-1"},[s("p",{staticStyle:{margin:"auto"}},[t._v("No result found")])])])])])])}),n=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"custom-control custom-radio mb-1"},[s("input",{staticClass:"custom-control-input",attrs:{type:"radio",id:"ascending",value:"ascending",name:""}}),s("label",{staticClass:"custom-control-label",attrs:{for:"ascending"}},[t._v("Ascending")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"custom-control custom-radio mb-1"},[s("input",{staticClass:"custom-control-input",attrs:{type:"radio",id:"descending",value:"descending",name:""}}),s("label",{staticClass:"custom-control-label",attrs:{for:"descending"}},[t._v("Descending")])])}],r={name:"Lessons",props:["lessons"],methods:{addLesson:function(t,s){this.$emit("addLesson",t,s)}},data(){return{order:"asc",attribute:"subject",sort:{sortingMethod:"location",sortingOrder:"ascending"},sortAttributes:{Subject:"subject",Location:"location",Price:"price",Spaces:"spaces"}}},computed:{sortedLessons(){function t(t,s){return t.subject>s.subject?1:t.subject<s.subject?-1:0}function s(t,s){return t.subject>s.subject?-1:t.subject<s.subject?1:0}function e(t,s){return t.location>s.location?1:t.location<s.location?-1:0}function o(t,s){return t.location>s.location?-1:t.location<s.location?1:0}function a(t,s){return t.price>s.price?1:t.price<s.price?-1:0}function c(t,s){return t.price>s.price?-1:t.price<s.price?1:0}function i(t,s){return t.space>s.space?1:t.space<s.space?-1:0}function n(t,s){return t.space>s.space?-1:t.space<s.space?1:0}return"asc"==this.order?"subject"==this.attribute?this.lessons.sort(t):"location"==this.attribute?this.lessons.sort(e):"price"==this.attribute?this.lessons.sort(a):this.lessons.sort(i):"subject"==this.attribute?this.lessons.sort(s):"location"==this.attribute?this.lessons.sort(o):"price"==this.attribute?this.lessons.sort(c):this.lessons.sort(n)}}},l=r,u=e(1656),d=(0,u.A)(l,i,n,!1,null,null,null),m=d.exports,h=function(){var t=this,s=t._self._c;return s("div",[s("h2",{staticClass:"text-center mt-5 mb-5"}),s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-2"},[s("aside",[s("h6",[t._v("Sort By")]),s("div",{staticClass:"custom-control custom-radio"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.attribute,expression:"attribute"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"subject",value:"subject",name:""},domProps:{checked:t._q(t.attribute,"subject")},on:{change:function(s){t.attribute="subject"}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"subject"}},[t._v("Subject")])]),s("div",{staticClass:"custom-control custom-radio"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.attribute,expression:"attribute"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"location",value:"location",name:""},domProps:{checked:t._q(t.attribute,"location")},on:{change:function(s){t.attribute="location"}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"location"}},[t._v("Location")])]),s("div",{staticClass:"custom-control custom-radio mb-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.attribute,expression:"attribute"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"price",value:"price",name:""},domProps:{checked:t._q(t.attribute,"price")},on:{change:function(s){t.attribute="price"}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"price"}},[t._v("Price")])]),s("div",{staticClass:"custom-control custom-radio mb-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.attribute,expression:"attribute"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"availability",value:"availability",name:""},domProps:{checked:t._q(t.attribute,"availability")},on:{change:function(s){t.attribute="availability"}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"availability"}},[t._v("Availability")])]),s("h6",{staticClass:"mt-4"},[t._v("Order By")]),t._m(0),t._m(1)])]),s("div",{staticClass:"col-md-10 row"},[t.cartItems.length>0?s("div",{staticClass:"row grid-1"},t._l(t.cartItems,(function(e,o){return s("div",{key:e.lesson._id,staticClass:"col-md-4"},[s("div",{staticClass:"card mb-4"},[s("img",{staticClass:"card-img",attrs:{src:`https://cw2-backend.onrender.com/${e.lesson.image}`,alt:"Lesson Image"}}),s("div",{staticClass:"card-body"},[s("h6",[t._v("Subject: "+t._s(e.lesson.subject))]),s("h6",[t._v("Location: "+t._s(e.lesson.location))]),s("h6",[t._v("Available: "+t._s(e.lesson.availablespace))]),s("h6",[t._v("Price: £"+t._s(e.lesson.price))]),s("h6",[t._v("Rating: "),t._l(e.lesson.rating,(function(e){return s("span",{key:e.id},[t._v("★")])})),t._l(5-e.lesson.rating,(function(e){return s("span",{key:e.id},[t._v("☆")])}))],2),s("button",{staticClass:"add_to_card-btn btn",on:{click:function(s){return t.removeLesson(o)}}},[t._v("Remove from Cart")])])])])})),0):s("div",{staticClass:"row grid-1"},[s("p",{staticStyle:{margin:"auto"}},[t._v("No result found")])])])])]),s("section",{attrs:{id:"check-out-form"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"row check-out-row"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.checkOutName,expression:"checkOutName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter your full name"},domProps:{value:t.checkOutName},on:{keyup:t.validateRegexCheckOut,input:function(s){s.target.composing||(t.checkOutName=s.target.value)}}})]),s("div",{staticClass:"col"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.checkOutNumber,expression:"checkOutNumber"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter your mobile"},domProps:{value:t.checkOutNumber},on:{keyup:t.validateRegexCheckOut,input:function(s){s.target.composing||(t.checkOutNumber=s.target.value)}}})])]),s("div",{staticClass:"col-md-12 text-center"},[s("button",{staticClass:"btn checkout-btn btn-info",attrs:{disabled:t.cannotCheckOut,type:"button"},on:{click:function(s){return t.checkOut(t.checkOutName,t.checkOutNumber)}}},[t._v("Check Out")])])])])])])])},v=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"custom-control custom-radio mb-1"},[s("input",{staticClass:"custom-control-input",attrs:{type:"radio",id:"ascending",value:"ascending",name:""}}),s("label",{staticClass:"custom-control-label",attrs:{for:"ascending"}},[t._v("Ascending")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"custom-control custom-radio mb-1"},[s("input",{staticClass:"custom-control-input",attrs:{type:"radio",id:"descending",value:"descending",name:""}}),s("label",{staticClass:"custom-control-label",attrs:{for:"descending"}},[t._v("Descending")])])}],p={name:"Lessons",props:["cartItems"],methods:{removeLesson:function(t){this.$emit("removeLesson",t)},validateRegexCheckOut:function(){var t=/^[a-zA-Z ]*$/;this.checkOutName.match(t)&&this.checkOutNumber.match(t)?this.cannotCheckOut=!1:this.cannotCheckOut=!0},checkOut:function(t,s){this.$emit("checkOut",t,s)}},data(){return{order:"asc",attribute:"subject",sort:{sortingMethod:"location",sortingOrder:"ascending"},sortAttributes:{Subject:"subject",Location:"location",Price:"price",Spaces:"spaces"}}},computed:{sortedLessons(){function t(t,s){return t.subject>s.subject?1:t.subject<s.subject?-1:0}function s(t,s){return t.subject>s.subject?-1:t.subject<s.subject?1:0}function e(t,s){return t.location>s.location?1:t.location<s.location?-1:0}function o(t,s){return t.location>s.location?-1:t.location<s.location?1:0}function a(t,s){return t.price>s.price?1:t.price<s.price?-1:0}function c(t,s){return t.price>s.price?-1:t.price<s.price?1:0}function i(t,s){return t.space>s.space?1:t.space<s.space?-1:0}function n(t,s){return t.space>s.space?-1:t.space<s.space?1:0}return"asc"==this.order?"subject"==this.attribute?this.lessons.sort(t):"location"==this.attribute?this.lessons.sort(e):"price"==this.attribute?this.lessons.sort(a):this.lessons.sort(i):"subject"==this.attribute?this.lessons.sort(s):"location"==this.attribute?this.lessons.sort(o):"price"==this.attribute?this.lessons.sort(c):this.lessons.sort(n)}}},b=p,f=(0,u.A)(b,h,v,!1,null,null,null),C=f.exports,g={name:"App",components:{Lessons:m,Checkout:C},data(){return{lessons:[],cartItems:[],showProduct:!0,searchTxt:""}},methods:{addLessonToCart:function(t,s){const e=this.lessons.findIndex((s=>s._id===t));-1!=e&&(console.log("heeeree"),this.lessons[e].availablespace-=1),this.addToCart(t,s)},updateShowProduct:function(){this.showProduct=!this.showProduct},addToCart:function(t,s){console.log("here");const e=this.cartItems.findIndex((s=>s.lessonID===t));-1!=e?this.cartItems[e].availablespace+=1:this.cartItems.push({lessonID:t,availablespace:1,lesson:s})},removeLessonFromCart:function(t){this.cartItems[t].availablespace=this.cartItems[t].availablespace-1;const s=this.lessons.findIndex((s=>s._id===this.cartItems[t].lessonID));-1!=s&&(this.lessons[s].availablespace+=1),0==this.cartItems[t].availablespace&&this.cartItems.splice(t,1),0==this.cartItems.length&&(this.showProduct=!0),console.log(this.cartItems)},cartCount:function(){let t=0;for(let s=0;s<this.cartItems.length;s++)t+=this.cartItems[s].availablespace;return t},searchLessons:function(){fetch("https://cw2-backend.onrender.com/collection/products/"+this.searchTxt).then((t=>{t.json().then((t=>{console.log(t),this.lessons=t,console.log(this.lessons)}))}))},checkOut:function(t,s){fetch("https://cw2-backend.onrender.com/collection/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,phone:s,lessons:this.cartItems})}).then((t=>t.json())).then((t=>{console.log("Success:",t)}));for(let e=0;e<this.cartItems.length;e++){const t=this.cartItems[e].lesson;fetch(`https://cw2-backend.onrender.com/collection/products/${t._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({availablespace:t.availablespace})}).then((t=>t.json())).then((t=>{console.log("Success:",t)}))}this.showProduct=!0,this.cartItems=[],this.$swal({title:"Check out successful",text:"Your order has been submitted",icon:"success"})},fetchLesson:function(t){const s=this.lessons.findIndex((s=>s._id===t));if(-1!=s)return this.lessons[s]},unregisterAllServiceWorkers(){navigator.serviceWorker.getRegistrations().then((function(t){for(let s of t)s.unregister()})),console.log("ServiceWorkers Unregistered")},deleteAllCaches(){caches.keys().then((function(t){for(let s of t)caches.delete(s)})),console.log("All Caches Deleted")}},created:function(){"serviceWorker"in navigator&&navigator.serviceWorker.register("../service-worker.js"),fetch("https://cw2-backend.onrender.com/collection/products").then((t=>{t.json().then((t=>{console.log(t),this.lessons=t,console.log(this.lessons+"Fetched")}))}))}},_=g,k=(0,u.A)(_,a,c,!1,null,null,null),y=k.exports;o.Ay.config.productionTip=!1,new o.Ay({render:t=>t(y)}).$mount("#app")}},s={};function e(o){var a=s[o];if(void 0!==a)return a.exports;var c=s[o]={exports:{}};return t[o].call(c.exports,c,c.exports,e),c.exports}e.m=t,function(){var t=[];e.O=function(s,o,a,c){if(!o){var i=1/0;for(u=0;u<t.length;u++){o=t[u][0],a=t[u][1],c=t[u][2];for(var n=!0,r=0;r<o.length;r++)(!1&c||i>=c)&&Object.keys(e.O).every((function(t){return e.O[t](o[r])}))?o.splice(r--,1):(n=!1,c<i&&(i=c));if(n){t.splice(u--,1);var l=a();void 0!==l&&(s=l)}}return s}c=c||0;for(var u=t.length;u>0&&t[u-1][2]>c;u--)t[u]=t[u-1];t[u]=[o,a,c]}}(),function(){e.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(s,{a:s}),s}}(),function(){e.d=function(t,s){for(var o in s)e.o(s,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:s[o]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)}}(),function(){var t={524:0};e.O.j=function(s){return 0===t[s]};var s=function(s,o){var a,c,i=o[0],n=o[1],r=o[2],l=0;if(i.some((function(s){return 0!==t[s]}))){for(a in n)e.o(n,a)&&(e.m[a]=n[a]);if(r)var u=r(e)}for(s&&s(o);l<i.length;l++)c=i[l],e.o(t,c)&&t[c]&&t[c][0](),t[c]=0;return e.O(u)},o=self["webpackChunkcw3_main"]=self["webpackChunkcw3_main"]||[];o.forEach(s.bind(null,0)),o.push=s.bind(null,o.push.bind(o))}();var o=e.O(void 0,[504],(function(){return e(2574)}));o=e.O(o)})();
//# sourceMappingURL=app.ebd5b248.js.map